<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Callback To Promise</title>
</head>
<body>
    <h1>LEARNING CALLBACK TO PROMISE FUNCTION</h1>
    
    <script>
        // Select a user from the database.
        // Get services of the user from an API.
        // Calculate the service cost based on the services from the 0server.
        
        function getUser(userId) {
            return new Promise((resolve, reject) => {
                console.log("Get user from the database");
                setTimeout(() => {
                    resolve({
                        userId: userId,
                        username: 'Ghulam'
                    });
                }, 1000);
            })
        }

        function getServices(user) {
            return new Promise((resolve, reject) => {
                console.log(`Get services of ${user.username} from the API`);
                setTimeout(() => {
                    resolve(['Email', 'VPN', 'CDN']);
                }, 2 * 1000);
            })
        }

        function getServicesCost(services) {
            return new Promise((resolve, reject) => {
                console.log(`Calculate service costs of ${services}`);
                setTimeout(() => {
                    resolve(services.length * 100);
                }, 3 * 1000);
            })
        }

        getUser(100)
            .then(getServices)
            .then(getServicesCost)
            .then(console.log);

        // getUser(100, (user) => {
        //     getServices(user, (services) => {
        //         getServicesCost(services, (cost) => {
        //             console.log(`The services cost is ${cost}`);
        //         });
        //     });
        // });
    </script>
</body>
</html>